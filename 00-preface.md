# 序：一只特立独行的指针

> "人到中年以后，才发现世界上除了自己本无底价。" —— 但C语言不是这样

我第一次见到C语言是在二十多年前，那时候它就像一个穿着旧西装的中年人，站在FORTRAN和Pascal中间，显得既不优雅也不张扬。但时光证明了，这个中年人其实是个隐士高手——Unix、Linux、Windows内核、Python解释器、Ruby虚拟机，还有你手里那台手机的基带固件，都是用它写的。

C语言的美，不在于它的语法糖有多么甜蜜，而在于它的诚实。它不像某些语言那样，用华丽的装饰掩盖计算的本质。C语言告诉你：计算机不过是一大块可以读写的内存，加上一个会修改内存状态的处理器。仅此而已。

但这本书想告诉你另一个故事。

如果你是从OCaml、Haskell或Rust的世界来的，你会发现C语言其实比你想象的要丰富。在那些看似简陋的语法背后，藏着深刻的类型理论：结构体是积类型（Product Type），联合体是和类型（Sum Type），指针是计算的延续（Continuation），而预处理宏……好吧，预处理宏是个怪物，但它是个函数式的怪物。

如果你是从Java、Python或JavaScript来的，这本书会带你穿透抽象的迷雾，看到计算的底层真相。你会发现，所有那些让你困惑的"引用"、"闭包"、"代数数据类型"，在C语言里都有它们的原始形态。

王小波说："一个人只拥有此生此世是不够的，他还应该拥有诗意的世界。"C语言的世界是诗意的，但不是浪漫主义的诗意，而是那种在精确中发现美的诗意——就像数学证明，或者机械表里的齿轮。

这本书的每一章都会从一个日常问题开始，逐渐深入到类型理论的核心，然后回到实践。我们不回避C语言的阴暗面：未定义行为、内存泄漏、段错误。但我们会学会与它们共处，就像学会与生活中的不确定性共处一样。

准备好了吗？让我们开始这场关于类型的冒险。

---

## 本书结构

1. **开始** - 类型是世界的分类法
2. **名字和函数** - 从表达式到语句
3. **情况分析** - Sum Types的艺术（联合体与tagged union）
4. **组合的艺术** - Product Types（结构体）
5. **指针** - 计算的延续
6. **函数指针与高阶函数** - 一等公民的幻觉
7. **预处理宏的函数式本质** - 编译期的λ演算
8. **内存管理** - 线性逻辑的实践
9. **类型系统的边界** - 什么时候打破规则
10. **构建更大的程序** - 模块与抽象

---

> "智慧本身就是好的。有一天我们都会死去，追求智慧的道路还会有人在走着。死掉以后的事我看不到，但在我活着的时候，想到这件事，心里就很高兴。"
>
> 学习C语言也是如此。
